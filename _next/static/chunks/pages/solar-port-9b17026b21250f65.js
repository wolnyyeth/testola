(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{9520:(e,t,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/solar-port",function(){return o(4474)}])},4474:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>D});var a=o(4848),n=o(3368),i=o.n(n),s=o(6715),l=o(6540),r=o(9974),c=o.n(r),d=o(8875),m=o(676),h=o(9549);o(6527);var u=o(5278),p=o(9437),g=o(6517),j=o(3421),w=o(5141),x=o(1683),f=o(2805),y=o(1812),S=o(3765);function v(e){let{mono:t,chargerLeft:o,FRAME_COLOR:n,...i}=e,{nodes:s,materials:l}=(0,S.p)("/3D/CAR_CHARGER.glb");return(0,a.jsx)("group",{...i,dispose:null,children:(0,a.jsxs)("group",{position:t?[0,0,o?1.8:-1.8]:[0,0,o?3.15:-3.15],rotation:[0,0,-Math.PI],scale:[-.08,-319.826,o?.07:-.07],children:[(0,a.jsx)("mesh",{geometry:s.Plane011.geometry,material:n}),(0,a.jsx)("mesh",{geometry:s.Plane011_1.geometry,material:l["Car rubber wheel.005"]}),(0,a.jsx)("mesh",{geometry:s.Plane011_2.geometry,material:l["Schwarz-Kunsstoff.008"]}),(0,a.jsx)("mesh",{geometry:s.Plane011_3.geometry,material:l["Kontackte.001"]}),(0,a.jsx)("mesh",{geometry:s.Plane011_4.geometry,material:l["Blau-Kunsstoff..002"]}),(0,a.jsx)("mesh",{geometry:s.Plane011_5.geometry,material:l["Car rubber wheel.001"]}),(0,a.jsx)("mesh",{geometry:s.Plane011_6.geometry,material:l["Car rubber wheel.002"]}),(0,a.jsx)("mesh",{geometry:s.Plane011_7.geometry,material:l["Material.018"]}),(0,a.jsx)("mesh",{geometry:s.Plane011_8.geometry,material:l["Car rubber wheel.003"]})]})})}function b(e){let{mono:t,FRAME_COLOR:o,GLASS:n,additionalEquipment:i,...s}=e,{nodes:l,materials:r}=(0,S.p)("/3D/SOLARPORT.glb");return(0,a.jsxs)("group",{...s,dispose:null,children:[(0,a.jsxs)("group",{position:t?[0,0,0]:[0,0,1.35],children:[(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.ŚCIANA_L.geometry,material:o,position:[0,0,1.81],scale:[.08,320,.16]}),i.includes("lamele dekoracyjne")&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.LAMELE_L.geometry,material:o,position:[0,0,1.775],scale:[.08,300,.07]}),i.includes("szkło dekoracyjne")&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.SZYBA_L.geometry,material:n,position:[0,0,1.81],scale:[.08,301.5,.5]})]}),(0,a.jsxs)("group",{position:t?[0,0,0]:[0,0,-1.35],children:[(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.ŚCIANA_R.geometry,material:o,position:[0,0,-1.81],scale:[.08,320,.16]}),i.includes("lamele dekoracyjne")&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.LAMELE_R.geometry,material:o,position:[0,0,-1.775],rotation:[0,0,-Math.PI],scale:[-.08,-300,-.07]}),i.includes("szkło dekoracyjne")&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.SZYBA_R.geometry,material:n,position:[0,0,-1.81],rotation:[0,0,-Math.PI],scale:[-.08,-301.5,-.5]})]}),i.includes("panele fotowoltaiczne")&&(0,a.jsxs)("group",{position:[0,.02,0],children:[t&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.PANELE.geometry,material:r["Material.008"],position:[0,2.63,0],rotation:[0,0,.087],scale:[1,.539,1]}),!t&&(0,a.jsxs)("group",{children:[(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.PANELE.geometry,material:r["Material.008"],position:[0,2.63,1.39],rotation:[0,0,.087],scale:[1,.539,.95]}),(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.PANELE.geometry,material:r["Material.008"],position:[0,2.63,-1.39],rotation:[0,0,.087],scale:[1,.539,.95]})]})]}),t&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube005.geometry,material:o}),i.includes("białe oświetlenie LED - wewnętrzne")&&t&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube005_1.geometry,material:r["Material.010"],scale:[.999,1,.999]}),i.includes("ambient oświetlenie LED RGB")&&t&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube005_2.geometry,material:r["Material.011"]}),i.includes("białe oświetlenie LED - zewnętrzne")&&t&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube005_3.geometry,material:r["Material.012"]}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube007.geometry,material:o}),i.includes("białe oświetlenie LED - wewnętrzne")&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube007_1.geometry,material:r["Material.014"],scale:[1,1,1.1]}),(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube007_4.geometry,material:r["Material.001"],scale:[.999,1,.999]})]}),i.includes("ambient oświetlenie LED RGB")&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube007_2.geometry,material:r["Material.015"],scale:[1,1,1.1]}),(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube007_5.geometry,material:r["Material.003"],scale:[.999,1,.999]})]}),i.includes("białe oświetlenie LED - zewnętrzne")&&(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube007_6.geometry,material:r["Material.004"]}),(0,a.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:l.Cube007_3.geometry,material:o})]}),i.includes("ładowarka samochodowa")&&(0,a.jsx)(v,{mono:t,chargerLeft:!1,FRAME_COLOR:o})]})}function E(e){let{cars:t,mono:o,mainColorSpecs:n,additionalEquipment:i,resetView:s}=e,{camera:r,gl:c}=(0,j.D)(),d=new p.Vector3;(0,l.useEffect)(()=>{c.setPixelRatio(Math.min(window.devicePixelRatio,1.5))},[c]),(0,l.useEffect)(()=>{let e=r.position.clone(),t=12.5;d.set(50,25,60),t=12.5;let o={x:e.x,y:e.y,z:e.z};g.Ay.to(o,{x:d.x,y:d.y,z:d.z,duration:1.5,onUpdate:()=>{r.position.set(o.x,o.y,o.z),r.updateProjectionMatrix()}}),g.Ay.to(r,{zoom:t,duration:.001,onUpdate:()=>r.updateProjectionMatrix()})},[s]);let[m,h]=(0,l.useState)(new p.Color(n.sceneValue)),u=new p.MeshStandardMaterial({color:m,roughness:n.matt?1:0,metalness:0,side:p.DoubleSide}),S=new p.MeshStandardMaterial({color:"#c4e2ff",roughness:1,metalness:1,transparent:!0,opacity:.25,side:p.DoubleSide});return(0,j.F)((e,t)=>{let o=new p.Color(n.sceneValue);y.cz.dampC(m,o,.075,t),h(m.clone()),u.color.set(m)}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("group",{scale:.7,position:[0,0,0],children:(0,a.jsxs)("group",{position:[0,-1.5,0],children:[(0,a.jsx)("group",{children:(0,a.jsx)(b,{mono:o,FRAME_COLOR:u,GLASS:S,additionalEquipment:i})}),(0,a.jsx)(w.OH,{preset:"city"}),(0,a.jsxs)("group",{scale:1,children:[(0,a.jsx)("directionalLight",{castShadow:!0,position:[-4,10,4],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-near":1,"shadow-camera-far":100,"shadow-camera-left":-25,"shadow-camera-right":25,"shadow-camera-top":25,"shadow-camera-bottom":-25}),(0,a.jsx)("directionalLight",{position:[4,5,4],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-near":1,"shadow-camera-far":100,"shadow-camera-left":-25,"shadow-camera-right":25,"shadow-camera-top":25,"shadow-camera-bottom":-25}),(0,a.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],receiveShadow:!0,children:[(0,a.jsx)("planeGeometry",{args:[2e3,120]}),(0,a.jsx)("shadowMaterial",{transparent:!0,opacity:.25})]})]}),(0,a.jsx)(x.w,{size:7.5,focus:.75,samples:15}),(0,a.jsx)(f.N,{makeDefault:!0,enablePan:!1,minDistance:0,maxDistance:2e3,minPolarAngle:0,maxPolarAngle:Math.PI/2})]})})})}S.p.preload("/CAR_CHARGER.glb"),S.p.preload("/3D/SOLARPORT.glb");var k=o(2464);o(354);var C=o(960);k.KQ.register({family:"Montserrat",fonts:[{src:"/fonts/Montserrat-Regular.ttf",fontWeight:"normal"},{src:"/fonts/Montserrat-Medium.ttf",fontWeight:"medium"},{src:"/fonts/Montserrat-Bold.ttf",fontWeight:"bold"},{src:"/fonts/Montserrat-ExtraBold.ttf",fontWeight:"extrabold"}]});let N=k.vv.create({page1Section:{top:"0px",width:"100%",height:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},page1ImageView:{top:"0px",width:"100%",height:500},page1ImageBackground:{top:"0px",width:"100%",height:425,backgroundColor:"#f0f0f0",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",color:"#ccc",fontSize:80,fontWeight:"extrabold",paddingTop:30},screenShot:{marginTop:-325,left:"0px",width:"100%",height:375,objectFit:"contain"},page1summary:{width:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",fontFamily:"Montserrat",marginTop:0,flexDirection:"column",justifyContent:"flex-start",alignItems:"center",gap:8},logo:{width:150,marginVertical:15,objectFit:"contain"},summaryDiv:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",padding:40,paddingBottom:0},summaryColumn:{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:5},summaryRow:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},clauseDiv:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",paddingHorizontal:40,marginTop:50,gap:5},page2Section:{top:"0px",width:"100%",height:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",padding:40,gap:8},sectionLabel:{fontFamily:"Montserrat",fontSize:14,fontWeight:"medium",marginBottom:10},summaryItemRow:{width:"100%",height:30,backgroundColor:"#f0f0f0",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:10},summaryItemPrice:{width:"100%",height:20,backgroundColor:"#fff",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:0},closuresWrapper:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"stretch",gap:3},closureWrapper:{width:"25%",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:3},summaryBigDiv:{width:"100%",backgroundColor:"#f0f0f0",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",padding:10},summaryWrapper:{width:"100%",height:120,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:3},closureItemPrice:{height:20,backgroundColor:"#fff",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:0},colorDiv:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:5},footer:{width:"100%",backgroundColor:"#f0f0f0",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:20,paddingVertical:30},logo2:{width:200,height:40,marginVertical:15,objectFit:"cover"},logo3:{width:200,marginVertical:15,objectFit:"cover"}}),z=async(e,t,o,n,i,s,l)=>{if(e.current)try{let e=document.getElementById("canvasDiv");if(!e)throw Error("Nie znaleziono elementu #canvasDiv");let r=e.querySelector("canvas");if(!r)throw Error("Nie znaleziono <canvas> w #canvasDiv");let c=r.toDataURL("image/png",.3),d=(0,a.jsxs)(k.yo,{children:[(0,a.jsx)(k.YW,{size:{width:595.28,height:841.89},children:(0,a.jsxs)(k.Ss,{style:N.page1Section,children:[(0,a.jsx)(k.Ss,{style:N.page1ImageView,children:(0,a.jsx)(k.Ss,{style:N.page1ImageBackground,children:(0,a.jsxs)(k.EY,{children:[" ",null==t?void 0:t.name.toUpperCase()," "]})})}),(0,a.jsx)(k._V,{src:c,style:N.screenShot}),(0,a.jsxs)(k.Ss,{style:N.page1summary,children:[(0,a.jsx)(k._V,{src:"/logo.png",style:N.logo}),(0,a.jsx)(k.EY,{style:{fontSize:22,fontFamily:"Montserrat",color:"#141414",fontWeight:"bold"},children:null==t?void 0:t.name.toUpperCase()}),(0,a.jsx)(k.EY,{style:{fontSize:15,fontFamily:"Montserrat",color:"#555",fontWeight:"normal"},children:"Zobacz szczeg\xf3ły swojego projektu"}),(0,a.jsx)(k.Ss,{style:N.clauseDiv,children:(0,a.jsx)(k.EY,{style:{fontSize:7,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:"* Informacje i oferta zawarta w tej wiadomości jest przeznaczona tylko dla osoby lub jednostki, do kt\xf3rej jest adresowana. Należy pamiętać, iż nie jest ona prawnie wiążąca, chyba że zostanie potwierdzona na piśmie. Może ona zawierać zastrzeżone i poufne informacje i jeżeli to nie Ty jesteś wskazanym odbiorcą nie możesz kopiować, rozpowszechniać lub podejmować żadnych czynności w oparciu o nią. Jeżeli otrzymałeś tę transmisję przez pomyłkę prosimy o niezwłoczne poinformowanie nas: tel.: +48 666 011 180. Dziękujemy"})})]})]})}),(0,a.jsxs)(k.YW,{size:{width:595.28},children:[(0,a.jsxs)(k.Ss,{style:N.page2Section,children:[(0,a.jsxs)(k.EY,{style:{fontSize:18,fontFamily:"Montserrat",color:"#141414",fontWeight:"bold"},children:["TW\xd3J PROJEKT - ",null==t?void 0:t.name.toUpperCase()]}),(0,a.jsx)(k.EY,{style:{fontSize:14,fontFamily:"Montserrat",color:"#555",fontWeight:"normal",marginBottom:35},children:"Zobacz wybrane opcje swojej konfiguracji"}),(0,a.jsx)(k.EY,{style:N.sectionLabel,children:"PODSTAWOWY SOLAR PORT"}),(0,a.jsxs)(k.Ss,{style:N.summaryItemRow,children:[(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:"SYSTEM"}),(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:i?"MONO":"DUO"})]}),(0,a.jsxs)(k.Ss,{style:N.summaryItemPrice,children:[(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"bold"},children:"Cena wybranej opcji"}),(0,a.jsxs)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"bold"},children:[(10*Math.ceil(4.5*o.basePrice/10)).toLocaleString()," PLN NETTO"]})]}),(0,a.jsx)(k.EY,{style:N.sectionLabel,children:"KOLORY"}),(0,a.jsxs)(k.Ss,{style:N.summaryItemRow,children:[(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:"Kolor Konstrukcji"}),(0,a.jsxs)(k.Ss,{style:N.colorDiv,children:[(0,a.jsxs)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:[null==s?void 0:s.colorName," ",(null==s?void 0:s.palette.toLowerCase())==="basic"?(null==s?void 0:s.matt)?"(MAT)":"":(null==s?void 0:s.palette.toLowerCase())==="exlusive"?"(EXCLUSIVE)":"(TEXTURE)"]}),(0,a.jsx)(k.Ss,{style:{backgroundColor:null==s?void 0:s.sceneValue,height:15,width:15,borderRadius:999}})]})]}),(0,a.jsxs)(k.Ss,{style:N.summaryItemPrice,children:[(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"bold"},children:"Cena wybranej opcji"}),(0,a.jsxs)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"bold"},children:[(10*Math.ceil(4.5*o.paint/10)).toLocaleString()," PLN NETTO"]})]}),l.length>0&&(0,a.jsx)(k.EY,{style:N.sectionLabel,children:"WYPOSAŻENIE DODATKOWE"}),l.map(e=>(0,a.jsxs)(k.Ss,{style:N.summaryItemRow,children:[(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:e}),(0,a.jsxs)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:[(10*Math.ceil((null==o?void 0:o[e])*4.5/10)).toLocaleString()," PLN NETTO"]})]}))]}),(0,a.jsx)(k.Ss,{style:{width:515.3,height:.5,backgroundColor:"#ddd",marginTop:30,marginLeft:40}}),(0,a.jsxs)(k.Ss,{style:N.summaryDiv,children:[(0,a.jsx)(k.Ss,{style:N.summaryColumn,children:(0,a.jsx)(k.EY,{style:{fontSize:16,fontFamily:"Montserrat",color:"#555",fontWeight:"bold"},children:"Twoja konfiguracja"})}),(0,a.jsxs)(k.Ss,{style:N.summaryColumn,children:[(0,a.jsxs)(k.Ss,{style:N.summaryRow,children:[(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:"Cena podstawowa"}),(0,a.jsxs)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:[(10*Math.ceil(4.5*n/10)).toLocaleString()," PLN"]})]}),(0,a.jsxs)(k.Ss,{style:N.summaryRow,children:[(0,a.jsx)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:"Podatek VAT (23%)"}),(0,a.jsxs)(k.EY,{style:{fontSize:9,fontFamily:"Montserrat",color:"#555",fontWeight:"medium"},children:[(10*Math.ceil(4.5*n/10)*.23).toLocaleString()," PLN"]})]}),(0,a.jsxs)(k.Ss,{style:N.summaryRow,children:[(0,a.jsx)(k.EY,{style:{fontSize:15,fontFamily:"Montserrat",color:"#555",fontWeight:"bold",marginTop:30},children:"Cena końcowa"}),(0,a.jsxs)(k.EY,{style:{fontSize:15,fontFamily:"Montserrat",color:"#555",fontWeight:"bold",marginTop:30},children:[(12.3*Math.ceil(4.5*n/10)).toLocaleString()," PLN"]})]})]})]}),(0,a.jsx)(k.EY,{style:{fontSize:10,fontFamily:"Montserrat",color:"#555",fontWeight:"bold",width:"100%",marginTop:40,textAlign:"center"},children:"WSZYSTKIE ELEMENTY DODATKOWE SOLAR PORT MOŻNA MONTOWAĆ ETAPAMI"}),(0,a.jsx)(k.EY,{style:{fontSize:8,fontFamily:"Montserrat",color:"#555",fontWeight:"medium",width:"100%",marginTop:20,textAlign:"center",paddingHorizontal:40},children:"Możliwa optymalizacja funkcjonalności i  koszt\xf3w – zachęcamy do kontaktu z ekspertem: tel. 666011160"}),(0,a.jsx)(k.EY,{style:{fontSize:8,fontFamily:"Montserrat",color:"#555",fontWeight:"medium",width:"100%",marginTop:0,textAlign:"center",paddingHorizontal:40},children:"Zapraszamy do owocnych negocjacji."}),(0,a.jsx)(k.Ss,{style:{width:515.3,height:.5,backgroundColor:"#ddd",marginTop:30,marginLeft:40}}),(0,a.jsxs)(k.Ss,{style:N.footer,children:[(0,a.jsx)(k._V,{src:"/logo_ib.png",style:N.logo2}),(0,a.jsx)(k.EY,{style:{fontFamily:"Montserrat",fontSize:10,fontWeight:"medium"},children:" WYŁĄCZNY DYSTRYBUTOR W POLSCE "}),(0,a.jsx)(k._V,{src:"/logo_suntech.png",style:N.logo3})]})]})]}),m=await (0,k.x8)(d).toBlob();return await L(m)}catch(e){return console.error("Błąd podczas generowania PDF:",e),null}},L=async e=>{try{let t=await C.PDFDocument.load(await e.arrayBuffer());t.setTitle(""),t.setAuthor(""),t.setProducer(""),t.setSubject(""),t.setKeywords([]);let o=await t.save({useObjectStreams:!0,updateFieldAppearances:!1});return new Blob([o],{type:"application/pdf"})}catch(t){return console.error("Błąd podczas kompresji PDF:",t),e}};function D(){let e=(0,s.useRouter)(),t=(0,l.useRef)(null),[o,n]=(0,l.useState)([]),[r,p]=(0,l.useState)(0),[g,j]=(0,l.useState)(1),[w,x]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!0),[S,v]=(0,l.useState)(!1),[b,k]=(0,l.useState)({}),[C,N]=(0,l.useState)(0),[L,D]=(0,l.useState)(!0),[M,O]=(0,l.useState)("BASIC"),[A,I]=(0,l.useState)({colorName:"RAL 7016",sceneValue:"#3b4044",palette:"basic",matt:!1}),[T,P]=(0,l.useState)(["lamele dekoracyjne","szkło dekoracyjne"]);(0,l.useEffect)(()=>{v(!S)},[r]);let W={name:"SOLAR PORT"},[V,B]=(0,l.useState)(!1),[F,Y]=(0,l.useState)(!1),_=(0,l.useRef)(),[U,K]=(0,l.useState)({firstName:"",phoneNumber:"",city:"",email:"",message:""}),G=e=>{let{name:t,value:o}=e.target;K(e=>({...e,[t]:o}))},Z=async()=>{console.log("Wysyłanie e-maila...");try{let e=ei(),o=(null==e?void 0:e.basePrice)+(null==e?void 0:e["ładowarka samochodowa"])+(null==e?void 0:e["panele fotowoltaiczne"])+(null==e?void 0:e["falownik / inwerter"])+(null==e?void 0:e["lamele dekoracyjne"])+(null==e?void 0:e["szkło dekoracyjne"])+(null==e?void 0:e["białe oświetlenie LED - wewnętrzne"])+(null==e?void 0:e["białe oświetlenie LED - zewnętrzne"])+(null==e?void 0:e["ambient oświetlenie LED RGB"])+(null==e?void 0:e.paint),a=await z(t,W,e,o,L,A,T),n=await new Promise((e,t)=>{let o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=t,o.readAsDataURL(a)}),i={to_email:U.email,from_name:h.Rs,from_email:h.wu,cc:h.aw,title:(0,h.ly)(U),text:(0,h.a$)(U),content:n,filename:"SOLAR PORT - KONFIGURATOR.pdf"};m.Ay.send("service_50sjobp","template_md3lbw6",i,"o3W1-NYRNH9IgbURd").then(e=>{B(!1),Y(!1),console.log("SUCCESS!",e.status,e.text)}).catch(e=>{console.error("Błąd podczas wysyłania e-maila:",e),alert("Wystąpił błąd podczas wysyłania e-maila")})}catch(e){console.error("Błąd podczas generowania PDF:",e)}},J=async e=>{e.preventDefault();try{Y(!0),await Z()}catch(e){console.error("Wystąpił błąd:",e)}};(0,l.useEffect)(()=>{1===r?B(!0):B(!1)},[r]);let X=async()=>{try{let e=ei(),o=(null==e?void 0:e.basePrice)+(null==e?void 0:e["ładowarka samochodowa"])+(null==e?void 0:e["panele fotowoltaiczne"])+(null==e?void 0:e["falownik / inwerter"])+(null==e?void 0:e["lamele dekoracyjne"])+(null==e?void 0:e["szkło dekoracyjne"])+(null==e?void 0:e["białe oświetlenie LED - wewnętrzne"])+(null==e?void 0:e["białe oświetlenie LED - zewnętrzne"])+(null==e?void 0:e["ambient oświetlenie LED RGB"])+(null==e?void 0:e.paint),a=await z(t,W,e,o,L,A,T),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download="SOLAR PORT - KONFIGURATOR.pdf",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}catch(e){console.error("Błąd podczas pobierania PDF:",e)}},[H,q]=(0,l.useState)(""),[Q,$]=(0,l.useState)("");async function ee(e){let t=await fetch("/api/getConfigurations"),o=await t.json();return o.success?o.data.find(t=>JSON.stringify(t.configSpecs)===JSON.stringify(e)):null}async function et(){let t={mono:L,mainColorSpecs:A,additionalEquipment:T},o=await ee(t);if(o)q(o.configNumber),e.push("/solar-port?".concat(o.configNumber),void 0,{shallow:!0});else{let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o="";for(let a=0;a<e;a++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}();await fetch("/api/addConfiguration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({configNumber:o,configSpecs:t})}),q(o),e.push("/solar-port?".concat(o),void 0,{shallow:!0})}}(0,l.useEffect)(()=>{2===r&&et()},[r]),(0,l.useEffect)(()=>{{let t=e.asPath.split("?")[1];console.log(t),t&&fetch("/api/getConfigurations").then(e=>e.json()).then(e=>{let o=e.data.find(e=>e.configNumber===t);o?(console.log("Załadowano konfigurację:",o),D(o.configSpecs.mono),I(o.configSpecs.mainColorSpecs),P(o.configSpecs.additionalEquipment)):console.warn("Nie znaleziono konfiguracji dla:",t)}).catch(e=>console.error("Błąd ładowania konfiguracji:",e))}},[e.isReady]);let[eo,ea]=(0,l.useState)("KOPIUJ"),en="https://inteligentne-pegole-konfigurator.vercel.app/solar-port?".concat(H);(0,l.useEffect)(()=>{if("SKOPIOWANO"===eo){let e=setTimeout(()=>ea("KOPIUJ"),2e3);return()=>clearTimeout(e)}},[eo]),(0,l.useEffect)(()=>{1===r&&v(!S)},[r]);let ei=()=>{let e={basePrice:L?17954:30349,"ładowarka samochodowa":T.includes("ładowarka samochodowa")?7900/4.5:0,"panele fotowoltaiczne":T.includes("panele fotowoltaiczne")?L?4760:9360:0,"falownik / inwerter":T.includes("falownik / inwerter")?L?7500/4.5:11500/4.5:0,"lamele dekoracyjne":T.includes("lamele dekoracyjne")?2341:0,"szkło dekoracyjne":T.includes("szkło dekoracyjne")?2508:0,"białe oświetlenie LED - wewnętrzne":T.includes("białe oświetlenie LED - wewnętrzne")?L?2413:4825:0,"ambient oświetlenie LED RGB":T.includes("ambient oświetlenie LED RGB")?L?2794:5589:0,"białe oświetlenie LED - zewnętrzne":T.includes("białe oświetlenie LED - zewnętrzne")?2800:0,paint:(null==A?void 0:A.palette.toLowerCase())==="basic"?(null==A?void 0:A.matt)===!0?.05*((L?17954:30349)+(T.includes("lamele dekoracyjne")?2341:0)):0:(null==A||A.palette.toLowerCase(),.1*((L?17954:30349)+(T.includes("lamele dekoracyjne")?2341:0)))};return console.log(e),e};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:" SOLAR PORT | KONFIGURATOR"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,a.jsxs)("div",{className:c().screenDiv,children:[(0,a.jsxs)("nav",{children:[(0,a.jsx)("img",{src:"logo.png",onClick:()=>e.push("/")}),(0,a.jsx)("h3",{children:" SOLAR PORT "}),(0,a.jsxs)("span",{children:[(0,a.jsx)("button",{onClick:()=>p(2),children:"UDOSTĘPNIJ KONFIGURACJĘ"}),(0,a.jsx)("button",{onClick:()=>p(1),children:"WYŚLIJ ZAPYTANIE"})]})]}),(0,a.jsxs)("div",{className:c().configuratorDiv,children:[(0,a.jsxs)("div",{className:c().canvasDiv,children:[(0,a.jsx)("div",{className:c().canvasElement,ref:t,id:"canvasDiv",children:(0,a.jsx)(d.Hl,{shadows:!0,camera:{position:[-40,30,40],fov:35},id:"canvas",antialias:"true",gl:{preserveDrawingBuffer:!0,alpha:!0},style:{position:"absolute",left:"0px",bottom:"0px",width:"100%",background:"transparent",height:"100%"},frameLoop:"demand",children:(0,a.jsx)("group",{position:[0,0,0],children:(0,a.jsx)(E,{cars:f,mono:L,mainColorSpecs:A,additionalEquipment:T,resetView:S})})})}),(0,a.jsxs)("div",{className:c().functionButtons,children:[(0,a.jsxs)("button",{onClick:()=>{D(!0),I({colorName:"RAL 7016",sceneValue:"#3b4044",palette:"basic",matt:!1}),P(["lamele dekoracyjne","szkło dekoracyjne"])},style:{color:"#555"},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),(0,a.jsxs)("a",{children:["Resetuj konfigurację",(0,a.jsx)("p",{})]})]}),(0,a.jsxs)("button",{onClick:()=>e.push("/"),style:{color:"#555"},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,a.jsxs)("a",{children:["Lista modeli",(0,a.jsx)("p",{})]})]}),(0,a.jsxs)("button",{onClick:()=>v(!S),style:{color:"#555"},children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{d:"M21.544 11.045C21.848 11.4713 22 11.6845 22 12C22 12.3155 21.848 12.5287 21.544 12.955C20.1779 14.8706 16.6892 19 12 19C7.31078 19 3.8221 14.8706 2.45604 12.955C2.15201 12.5287 2 12.3155 2 12C2 11.6845 2.15201 11.4713 2.45604 11.045C3.8221 9.12944 7.31078 5 12 5C16.6892 5 20.1779 9.12944 21.544 11.045Z",stroke:"currentColor",strokeWidth:"1.5"}),(0,a.jsx)("path",{d:"M15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12Z",stroke:"currentColor",strokeWidth:"1.5"})]}),(0,a.jsxs)("a",{children:["Resetuj widok",(0,a.jsx)("p",{})]})]}),(0,a.jsxs)("button",{onClick:()=>p(2),style:{color:"#555"},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})}),(0,a.jsxs)("a",{children:["Udostępnij konfigurację",(0,a.jsx)("p",{})]})]})]})]}),(0,a.jsxs)("div",{className:c().controlsDiv,children:[(0,a.jsx)("div",{className:c().panelDiv,children:(0,a.jsx)("div",{className:c().panelWindow,children:(0,a.jsx)("div",{className:c().panelWrapper,style:{left:"0px",width:"100%"},children:(0,a.jsxs)("div",{className:c().panel,children:[(0,a.jsx)("label",{className:c().panelLabel,children:" Rozmiar "}),(0,a.jsxs)("div",{className:c().cardWrapper,children:[(0,a.jsxs)("div",{className:"".concat(c().cardDiv," ").concat(c().doubleDiv," ").concat(L?c().active:""),onClick:()=>{D(!0)},children:[(0,a.jsx)("img",{src:"https://consty-admin-0.s3.amazonaws.com/1743520269601.png"}),(0,a.jsx)("p",{children:" MONO "}),(0,a.jsxs)("button",{children:[" ",L?"WYBRANO":"WYBIERZ"," "]})]}),(0,a.jsxs)("div",{className:"".concat(c().cardDiv," ").concat(c().doubleDiv," ").concat(L?"":c().active),onClick:()=>{D(!1)},children:[(0,a.jsx)("img",{src:"https://consty-admin-0.s3.amazonaws.com/1743520280762.png"}),(0,a.jsx)("p",{children:" DUO "}),(0,a.jsxs)("button",{children:[" ",L?"WYBIERZ":"WYBRANO"," "]})]})]}),(0,a.jsx)("label",{className:c().panelLabel,children:" Kolor Konstruckji "}),(0,a.jsx)("div",{className:c().wallButtons,children:["BASIC","EXCLUSIVE","TEXTURE"].map(e=>(0,a.jsx)("button",{onClick:()=>O(e),className:M===e?c().active:"",children:e},e))}),(0,a.jsx)("div",{className:c().colorButtons,children:R.filter(e=>e.segment===M).map(e=>(0,a.jsxs)("button",{className:"".concat(c().colorButton," ").concat(A.colorName===e.colorName?c().active:""),onClick:()=>I({colorName:e.colorName,sceneValue:e.labelValue,palette:e.segment,matt:"BASIC"!==e.segment}),children:[(0,a.jsx)("a",{style:{background:e.labelValue}}),(0,a.jsxs)("p",{children:[" ",e.colorName," "]})]},e.colorName))}),"BASIC"===M&&(0,a.jsx)("div",{className:c().checkBoxWrapper,children:(0,a.jsxs)("div",{className:"".concat(c().checkBoxDiv2," ").concat(A.matt?c().active:""),onClick:()=>I(e=>({...e,matt:!e.matt})),children:[(0,a.jsx)("p",{children:" Matowe Wykończenie "}),(0,a.jsx)("span",{children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M5 14L8.5 17.5L19 6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),(0,a.jsx)("label",{className:c().panelLabel,children:" Dodatkowe Wyposażenie "}),(0,a.jsx)("div",{className:c().checkBoxWrapper,children:["ładowarka samochodowa","panele fotowoltaiczne","falownik / inwerter","lamele dekoracyjne","szkło dekoracyjne","białe oświetlenie LED - wewnętrzne","ambient oświetlenie LED RGB","białe oświetlenie LED - zewnętrzne"].map((e,t)=>(0,a.jsxs)("div",{className:"".concat(c().checkBoxDiv2," ").concat(T.includes(e)?c().active:""),onClick:()=>{T.includes(e)?P(T.filter(t=>t!==e)):P([...T,e])},children:[(0,a.jsxs)("p",{children:[" ",e," "]}),(0,a.jsx)("span",{children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M5 14L8.5 17.5L19 6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})})]},t))})]})})})}),(0,a.jsx)("div",{className:c().buttonDiv,children:(0,a.jsx)("button",{onClick:()=>p(1),children:" WYŚLIJ ZAPYTANIE "})})]})]})]}),0!==r&&(0,a.jsxs)("div",{className:c().popUpDiv,children:[1===r&&(0,a.jsxs)("div",{className:c().emailPopUpDiv,children:[(0,a.jsxs)("nav",{children:[(0,a.jsx)("h4",{children:" Wyślij zapytanie i otrzymaj spersonalizowaną ofertę "}),(0,a.jsx)("button",{onClick:()=>p(0),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M19.0005 4.99988L5.00049 18.9999M5.00049 4.99988L19.0005 18.9999",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),V?(0,a.jsx)(a.Fragment,{children:F?(0,a.jsx)("div",{className:c().loaderDiv,children:(0,a.jsxs)("div",{className:c().dotSpinner,children:[(0,a.jsx)("div",{className:c().dotSpinnerDot}),(0,a.jsx)("div",{className:c().dotSpinnerDot}),(0,a.jsx)("div",{className:c().dotSpinnerDot}),(0,a.jsx)("div",{className:c().dotSpinnerDot}),(0,a.jsx)("div",{className:c().dotSpinnerDot}),(0,a.jsx)("div",{className:c().dotSpinnerDot}),(0,a.jsx)("div",{className:c().dotSpinnerDot}),(0,a.jsx)("div",{className:c().dotSpinnerDot})]})}):(0,a.jsxs)("form",{onSubmit:J,ref:_,children:[(0,a.jsx)("input",{type:"text",name:"firstName",placeholder:"IMIE *",value:U.firstName,onChange:G,required:!0,className:"input-field"}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"E-MAIL *",value:U.email,onChange:G,required:!0,className:"input-field"}),(0,a.jsx)("input",{type:"text",name:"phoneNumber",placeholder:"TELEFON *",value:U.phoneNumber,onChange:G,required:!0,className:"input-field"}),(0,a.jsx)("input",{type:"text",name:"city",placeholder:"MIASTO *",value:U.city,onChange:G,required:!0,className:"input-field"}),(0,a.jsx)("textarea",{name:"message",rows:"4",placeholder:"WIADOMOŚĆ",value:U.message,onChange:G,className:"textarea-field"}),(0,a.jsx)("button",{type:"submit",children:" WYŚLIJ ZAPYTANIE "})]})}):(0,a.jsxs)("div",{className:c().alertDiv,children:[(0,a.jsx)("h3",{children:" TWOJE ZAPYTANIE ZOSTAŁO WYSŁANE "}),(0,a.jsx)("p",{children:" Wysłaliśmy ofertę na tw\xf3j adres email lub możesz ją pobrać tutaj "}),(0,a.jsx)("button",{onClick:X,children:" POBIERZ OFERTĘ W PDF "})]})]}),2===r&&(0,a.jsxs)("div",{className:c().sharePopUpDiv,children:[(0,a.jsxs)("nav",{children:[(0,a.jsx)("h4",{children:" Skopiuj ten link i udostępnij sw\xf3j projekt znajomym "}),(0,a.jsx)("button",{onClick:()=>p(0),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M19.0005 4.99988L5.00049 18.9999M5.00049 4.99988L19.0005 18.9999",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,a.jsx)("div",{className:c().popUpBody,children:""===H?(0,a.jsx)("p",{children:" GENEROWANIE NUMERU TWOJEJ KONFIGURACJI... "}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{value:en}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(en).then(()=>ea("SKOPIOWANO")).catch(()=>ea("KOPIUJ"))},children:eo})]})})]}),22===r&&(0,a.jsxs)("div",{className:c().pdfPreview,children:[(0,a.jsx)(u.A,{canvasRef:t,activeModel:{name:"SOLAR PORT"},pdfPrice:b,pdfFullPrice:C,mono:L,mainColorSpecs:A,additionalEquipment:T}),(0,a.jsx)("button",{onClick:()=>p(0),children:" ZAMKNIJ PODGLĄD "})]})]})]})}let R=[{colorName:"RAL 9016",labelValue:"#eff0eb",sceneValue:"",segment:"BASIC"},{colorName:"RAL 1013",labelValue:"#dfdbc7",sceneValue:"",segment:"BASIC"},{colorName:"RAL 9006",labelValue:"#9a9d9d",sceneValue:"",segment:"BASIC"},{colorName:"RAL 7006",labelValue:"#716c60",sceneValue:"",segment:"BASIC"},{colorName:"RAL 7016",labelValue:"#3b4044",sceneValue:"",segment:"BASIC"},{colorName:"RAL 9005",labelValue:"#131516",sceneValue:"",segment:"BASIC"},{colorName:"OGN35",labelValue:"#9b9aa0",sceneValue:"",segment:"EXCLUSIVE"},{colorName:"OS561",labelValue:"#a5a6a1",sceneValue:"",segment:"EXCLUSIVE"},{colorName:"OY395",labelValue:"#595549",sceneValue:"",segment:"EXCLUSIVE"},{colorName:"OGN39",labelValue:"#717479",sceneValue:"",segment:"EXCLUSIVE"},{colorName:"ON617",labelValue:"#616469",sceneValue:"",segment:"EXCLUSIVE"},{colorName:"ON611",labelValue:"#292c31",sceneValue:"",segment:"EXCLUSIVE"},{colorName:"ST9010",labelValue:"#fcfcfc",sceneValue:"",segment:"TEXTURE"},{colorName:"ST9001",labelValue:"#f0ebe8",sceneValue:"",segment:"TEXTURE"},{colorName:"ST1013",labelValue:"#dcd8cc",sceneValue:"",segment:"TEXTURE"},{colorName:"ST7039",labelValue:"#858681",sceneValue:"",segment:"TEXTURE"},{colorName:"ST7016",labelValue:"#45515d",sceneValue:"",segment:"TEXTURE"},{colorName:"ST8019",labelValue:"#352f31",sceneValue:"",segment:"TEXTURE"}]}},e=>{var t=t=>e(e.s=t);e.O(0,[624,964,256,864,489,548,84,834,476,577,636,593,792],()=>t(9520)),_N_E=e.O()}]);